<div class="container-fluid h-100">
  <div class="row h-100 flex-nowrap">
    <div class="col content pt-3">
      <div class="groups-table h-100">
        <div class="mb-3">
          <input class="selection-panel search form-control" type="text"
                 placeholder="Пошук за ім'ям"
                 [(ngModel)]="searchText"
                 (input)="updateGroups()">
          <label class="selection-panel active-group">
            <input type="checkbox"
                   [checked]="actualGroups"
                   (change)="actualGroups =!actualGroups; updateGroups()">
            Актуальні групи
          </label>
          <div class="float-right">
            <button type="button" class="btn btn-danger align-middle"
                    [disabled]="selectedGroups.length === 0"
                    (click)="deleteGroup.openModal(selectedGroups)">
              Видалити
            </button>

            <button type="button" class="btn btn-warning align-middle"
                    [disabled]="selectedGroups.length === 0 || selectedGroups.length > 1"
                    (click)="updateGroup.openModal(selectedGroups[0])">
              Редагувати
            </button>

            <button type="button" class="btn btn-success align-middle"
                    (click)="addGroup.openModal()">
              Нова група
            </button>
          </div>
        </div>
        <group-table
          #table
          [rows]="groups"
          [loading]="loadingGroups"
          (handleSelectedChange)="handleSelectedChange($event)"
        ></group-table>
      </div>

      <div class="bg-light fixed-bottom p-3" style="z-index: 1">
        <span class="mr-3">Всього: {{groups.length || '0'}}</span>
        <span>Вибрано: {{selectedGroups.length || '0'}}</span>
      </div>
    </div>
  </div>
</div>

<add-group #addGroup (onSubmit)="loadGroups()"
           [specializations]="specializations"
           [tuitionForms]="tuitionForms"
           [tuitionFormsKeys]="tuitionFormsKeys"
           [tuitionTerms]="tuitionTerms"
           [tuitionTermsKeys]="tuitionTermsKeys"
></add-group>

<delete-group #deleteGroup (onSubmit)="loadGroups()"
              (showErrorAlert)="showErrorAlert($event)"
></delete-group>

<update-group #updateGroup (onSubmit)="loadGroups()"
              [specializations]="specializations"
              [tuitionForms]="tuitionForms"
              [tuitionFormsKeys]="tuitionFormsKeys"
              [tuitionTerms]="tuitionTerms"
              [tuitionTermsKeys]="tuitionTermsKeys"
></update-group>

<simple-notifications></simple-notifications>
